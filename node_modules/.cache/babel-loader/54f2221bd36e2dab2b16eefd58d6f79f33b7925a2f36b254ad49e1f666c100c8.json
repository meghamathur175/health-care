{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\life\\\\Ambulance\\\\client\\\\src\\\\components\\\\EmergencyRequestForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport '../styles/EmergencyRequestForm.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EmergencyRequestForm = () => {\n  _s();\n  const [formData, setFormData] = useState({\n    name: '',\n    phone: '',\n    emergencyType: '',\n    location: '',\n    latitude: '',\n    longitude: ''\n  });\n  const [loadingLocation, setLoadingLocation] = useState(false);\n  useEffect(() => {\n    if ('geolocation' in navigator) {\n      setLoadingLocation(true);\n      navigator.geolocation.getCurrentPosition(position => {\n        setFormData(prev => ({\n          ...prev,\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n          location: `Lat: ${position.coords.latitude}, Lon: ${position.coords.longitude}`\n        }));\n        setLoadingLocation(false);\n      }, error => {\n        console.error('Geolocation error:', error);\n        setLoadingLocation(false);\n      });\n    } else {\n      console.warn('Geolocation not available');\n    }\n  }, []);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Validate Phone Number (must be a valid phone number format)\n    const phoneRegex = /^[0-9]{10}$/;\n    if (!phoneRegex.test(formData.phone)) {\n      alert('Please enter a valid 10-digit phone number.');\n      return;\n    }\n\n    // Check if all required fields are filled\n    if (!formData.name || !formData.phone || !formData.emergencyType) {\n      alert('Please fill in all required fields.');\n      return;\n    }\n    try {\n      const response = await fetch('http://localhost:3001/requests', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n      if (response.ok) {\n        // Show success alert before redirecting\n        alert('Ambulance requested successfully! You will be redirected to tracking...');\n        window.location.href = '/tracking'; // Redirect to the tracking page\n      } else {\n        alert('Failed to submit request.');\n      }\n    } catch (error) {\n      console.error('Error submitting request:', error);\n      alert('Error submitting request.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Emergency Request \\uD83D\\uDE91\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-container\",\n      children: [formData.latitude && formData.longitude && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-container\",\n        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n          title: \"Emergency Request Map\",\n          src: \"your-iframe-source-url\",\n          width: \"100%\",\n          height: \"400px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-wrapper\",\n        children: [loadingLocation && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Detecting location...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            placeholder: \"Name*\",\n            value: formData.name,\n            onChange: handleChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            name: \"phone\",\n            placeholder: \"Phone*\",\n            value: formData.phone,\n            onChange: handleChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"emergencyType\",\n            value: formData.emergencyType,\n            onChange: handleChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select Emergency Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Accident\",\n              children: \"Accident\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Heart Attack\",\n              children: \"Heart Attack\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Fire\",\n              children: \"Fire\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Other\",\n              children: \"Other\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"location\",\n            placeholder: \"Location (auto)\",\n            value: formData.location,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Request Ambulance\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n_s(EmergencyRequestForm, \"3Xckdrnz3Q5s7Da8jU6HFhFGYZY=\");\n_c = EmergencyRequestForm;\nexport default EmergencyRequestForm;\nvar _c;\n$RefreshReg$(_c, \"EmergencyRequestForm\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","EmergencyRequestForm","_s","formData","setFormData","name","phone","emergencyType","location","latitude","longitude","loadingLocation","setLoadingLocation","navigator","geolocation","getCurrentPosition","position","prev","coords","error","console","warn","handleChange","e","value","target","handleSubmit","preventDefault","phoneRegex","test","alert","response","fetch","method","headers","body","JSON","stringify","ok","window","href","className","children","fileName","_jsxFileName","lineNumber","columnNumber","title","src","width","height","onSubmit","type","placeholder","onChange","required","readOnly","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/life/Ambulance/client/src/components/EmergencyRequestForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../styles/EmergencyRequestForm.css';\r\n\r\nconst EmergencyRequestForm = () => {\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        phone: '',\r\n        emergencyType: '',\r\n        location: '',\r\n        latitude: '',\r\n        longitude: ''\r\n    });\r\n\r\n    const [loadingLocation, setLoadingLocation] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if ('geolocation' in navigator) {\r\n            setLoadingLocation(true);\r\n            navigator.geolocation.getCurrentPosition(\r\n                (position) => {\r\n                    setFormData((prev) => ({\r\n                        ...prev,\r\n                        latitude: position.coords.latitude,\r\n                        longitude: position.coords.longitude,\r\n                        location: `Lat: ${position.coords.latitude}, Lon: ${position.coords.longitude}`\r\n                    }));\r\n                    setLoadingLocation(false);\r\n                },\r\n                (error) => {\r\n                    console.error('Geolocation error:', error);\r\n                    setLoadingLocation(false);\r\n                }\r\n            );\r\n        } else {\r\n            console.warn('Geolocation not available');\r\n        }\r\n    }, []);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData((prev) => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        // Validate Phone Number (must be a valid phone number format)\r\n        const phoneRegex = /^[0-9]{10}$/;\r\n        if (!phoneRegex.test(formData.phone)) {\r\n            alert('Please enter a valid 10-digit phone number.');\r\n            return;\r\n        }\r\n\r\n        // Check if all required fields are filled\r\n        if (!formData.name || !formData.phone || !formData.emergencyType) {\r\n            alert('Please fill in all required fields.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await fetch('http://localhost:3001/requests', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(formData)\r\n            });\r\n\r\n            if (response.ok) {\r\n                // Show success alert before redirecting\r\n                alert('Ambulance requested successfully! You will be redirected to tracking...');\r\n                window.location.href = '/tracking';  // Redirect to the tracking page\r\n            } else {\r\n                alert('Failed to submit request.');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error submitting request:', error);\r\n            alert('Error submitting request.');\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <h2>Emergency Request 🚑</h2>\r\n            <div className=\"form-container\">\r\n                {/* Left side: Google Maps */}\r\n                {formData.latitude && formData.longitude && (\r\n                    <div className=\"map-container\">\r\n                        <iframe\r\n                            title=\"Emergency Request Map\"\r\n                            src=\"your-iframe-source-url\"\r\n                            width=\"100%\"\r\n                            height=\"400px\">\r\n                        </iframe>\r\n\r\n                    </div>\r\n                )}\r\n\r\n                {/* Right side: Form */}\r\n                <div className=\"form-wrapper\">\r\n                    {loadingLocation && <p>Detecting location...</p>}\r\n                    <form onSubmit={handleSubmit}>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"name\"\r\n                            placeholder=\"Name*\"\r\n                            value={formData.name}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                        <input\r\n                            type=\"tel\"\r\n                            name=\"phone\"\r\n                            placeholder=\"Phone*\"\r\n                            value={formData.phone}\r\n                            onChange={handleChange}\r\n                            required\r\n                        />\r\n                        <select\r\n                            name=\"emergencyType\"\r\n                            value={formData.emergencyType}\r\n                            onChange={handleChange}\r\n                            required\r\n                        >\r\n                            <option value=\"\">Select Emergency Type</option>\r\n                            <option value=\"Accident\">Accident</option>\r\n                            <option value=\"Heart Attack\">Heart Attack</option>\r\n                            <option value=\"Fire\">Fire</option>\r\n                            <option value=\"Other\">Other</option>\r\n                        </select>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"location\"\r\n                            placeholder=\"Location (auto)\"\r\n                            value={formData.location}\r\n                            readOnly\r\n                        />\r\n                        <button type=\"submit\">Request Ambulance</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EmergencyRequestForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}